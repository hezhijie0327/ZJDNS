server:
    # Server Interface
    interface: 0.0.0.0@443
    interface: 0.0.0.0@53
    interface: 0.0.0.0@853
    interface: ::@443
    interface: ::@53
    interface: ::@853

    # Server Logging
    log-local-actions: yes
    log-queries: yes
    log-replies: yes
    log-servfail: yes
    log-tag-queryreply: yes
    log-time-ascii: yes
    use-syslog: no
    val-log-level: 0
    verbosity: 0

    # Server Port
    https-port: 443
    port: 53
    tls-port: 853

    # Server Privacy
    hide-http-user-agent: yes
    hide-identity: yes
    hide-trustanchor: yes
    hide-version: yes

    # Server Runtime
    auto-trust-anchor-file: "/usr/local/etc/unbound/root.key"
    chroot: ""
    directory: "/usr/local/etc/unbound"
    logfile: ""
    module-config: "dns64 iterator subnetcache validator"
    pidfile: "/usr/local/etc/unbound/unbound.pid"
    root-hints: "/usr/local/etc/unbound/root.hints"
    tls-service-key: "/usr/local/etc/ssl/zhijie.online.key"
    tls-service-pem: "/usr/local/etc/ssl/fullchain.cer"
    username: ""

    # Server Security
    access-control: 0.0.0.0/0 allow
    access-control: ::/0 allow
    aggressive-nsec: yes
    deny-any: yes
    ip-ratelimit-factor: 10
    ip-ratelimit-size: 4m
    ip-ratelimit-slabs: 1
    ip-ratelimit: 1000
    ratelimit-factor: 10
    ratelimit-size: 4m
    ratelimit-slabs: 1
    ratelimit: 1000

    # Server Setting
    do-not-query-localhost: no
    num-threads: 1
    max-udp-size: 4096
    msg-buffer-size: 65552
    stream-wait-size: 4m
    ip-freebind: yes
    ip-transparent: yes
    so-rcvbuf: 0
    so-reuseport: yes
    so-sndbuf: 0

    # Server Statistics
    extended-statistics: yes
    statistics-cumulative: yes
    statistics-interval: 0

    # Auto Trust Anchor
    add-holddown: 2592000
    del-holddown: 2592000
    keep-missing: 31622400
    root-key-sentinel: yes
    trust-anchor-signaling: yes

    # Cache
    cache-max-negative-ttl: 3600
    cache-max-ttl: 3600
    cache-min-ttl: 300
    infra-cache-min-rtt: 50
    infra-cache-numhosts: 10000
    infra-cache-slabs: 1
    infra-host-ttl: 3600
    infra-keep-probing: yes
    key-cache-size: 4m
    key-cache-slabs: 1
    msg-cache-size: 4m
    msg-cache-slabs: 1
    neg-cache-size: 1m
    rrset-cache-size: 4m
    rrset-cache-slabs: 1
    rrset-roundrobin: yes
    serve-expired-client-timeout: 1800
    serve-expired-reply-ttl: 30
    serve-expired-ttl-reset: yes
    serve-expired-ttl: 259200
    serve-expired: yes
    serve-original-ttl: no

    # CAPS
    use-caps-for-id: yes

    # DNS64
    dns64-prefix: 64:ff9b::/96

    # DNSSEC
    val-bogus-ttl: 3600
    val-clean-additional: yes
    val-max-restart: 5
    val-sig-skew-max: 86400
    val-sig-skew-min: 3600

    # DoH
    http-endpoint: "/dns-query"
    http-max-streams: 100
    http-nodelay: yes
    http-notls-downstream: no
    http-query-buffer-size: 4m
    http-response-buffer-size: 4m
    tls-use-sni: yes

    # EDNS
    client-subnet-always-forward: yes
    edns-buffer-size: 1232
    edns-tcp-keepalive-timeout: 120000
    edns-tcp-keepalive: yes
    max-client-subnet-ipv4: 24
    max-client-subnet-ipv6: 56
    max-ecs-tree-size-ipv4: 100
    max-ecs-tree-size-ipv6: 100
    min-client-subnet-ipv4: 0
    min-client-subnet-ipv6: 0

    # Fast Server
    fast-server-num: 3
    fast-server-permil: 900

    # Harden
    harden-algo-downgrade: yes
    harden-below-nxdomain: yes
    harden-dnssec-stripped: yes
    harden-glue: yes
    harden-large-queries: yes
    harden-referral-path: yes
    harden-short-bufsize: yes

    # Minimal Response
    minimal-responses: yes

    # Padding
    pad-queries-block-size: 128
    pad-queries: yes
    pad-responses-block-size: 468
    pad-responses: yes

    # Prefetch
    prefetch-key: yes
    prefetch: yes

    # Private Address
    private-address: 0.0.0.0/8
    private-address: 10.0.0.0/8
    private-address: 100.64.0.0/10
    private-address: 100::/64
    private-address: 127.0.0.0/8
    private-address: 169.254.0.0/16
    private-address: 172.16.0.0/12
    private-address: 192.0.0.0/24
    private-address: 192.0.2.0/24
    private-address: 192.168.0.0/16
    private-address: 192.88.99.0/24
    private-address: 198.18.0.0/15
    private-address: 198.51.100.0/24
    private-address: 203.0.113.0/24
    private-address: 224.0.0.0/4
    private-address: 233.252.0.0/24
    private-address: 240.0.0.0/4
    private-address: 255.255.255.255/32
    private-address: 2001:10::/28
    private-address: 2001:20::/28
    private-address: 2001::/32
    private-address: 2001:db8::/32
    private-address: 2002::/16
    private-address: ::/128
    private-address: ::1/128
    private-address: fc00::/7
    private-address: fe80::/10
    private-address: ff00::/8

    # QNAME
    qname-minimisation-strict: yes
    qname-minimisation: yes

forward-zone:
    name: "."
    forward-addr: 127.0.0.1@5533
    forward-first: yes
    forward-no-cache: yes
